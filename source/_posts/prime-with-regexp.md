---
title: 정규식으로 소수 찾기 (Code)
date: 2016-08-09 00:32:55
tags: Java Script, js, regular expression, regexp, 정규식, 소수, prime
---

<p>보통 소수를 찾는 방법이라 하면, '에라토네스의 체(Sieve of Eratosthenes)' 가 떠오를 것이다.<br />하지만, 정규식을 이용해, 몇 줄만으로 소수를 찾는 방법이 있다.<br />코드는 아래와 같다.</p>
```js
var isPrime = function (x) {
  return (!(/^,?$|^(,,+?)\1+$/.test(Array(++x))));
};

isPrime(2); // true
isPrime(4); // false
isPrime(19); // true
```

<p>isPrime 함수는 양의 정수 x 를 인자로 받는다.<br />그 뒤, x 에 1 을 더하여 배열을 만든다. 여기서, RegExp.prototype.text() 메소드는 스트링을 인자로 받기 때문에 Array(++x) 는 x 개의 ',' 로 이루어진 문자열로 형변환된다.<br/>그리고, /^,?$/ 와 /^(,,+?)/ 는 x 개의 ',' 로 이루어진 문자열에 대해 정규표현식 검색을 수행한다.<br />먼저, 미리 알아두면 좋은 표현식 몇 가지를 설명하고, 예시를 들어 코드를 설명하겠다.<br /><br />정규표현식에서 ^X 는 X 로 시작하는 문자열이며, X$ 는 X 로 끝나는 문자열이다.<br />(X)? 는 X 가 0 번 혹은 1 번 이상 반복되는 문자열이며,<br />(X)+ 는 X 가 1 번 이상 반복되는 문자열이다.<br />(X)\1 는 정규식 안 1 번째 괄호의 최근 일치 부분에 대한 역참조이다.<br /><br />만약 x 가 5라고 하자.<br />그럼, RegExp.prototype.test() 메소드의 인자는 ',,,,' 가 된다.<br />(,,+?) 는 ',,,,,' 의 첫 두 ',,' 와 매칭된다.<br />그리고 역참조 \1 은 ',,' 이 되며, 전체 정규식은 /^,,(,,)+$/ 이 된다.<br />',,,,,' 은 /^,,(,,)+$/ 와 매칭되지 않는다.<br />(,,+?) 에서 '+?' 이 사용되었기 때문에 ',,,' 와 매칭을 한다.<br />(,,+?) 는 ',,,,,' 의 첫 세 ',,,' 와 매칭되며, \1 는 ',,,' 이 되어 정규식은 /^,,,(,,,)+$/ 이 된다.<br />매칭은 또 실패하며, ',,,,' 와 ',,,,,' 도 마찬가지이다.<br />따라서 5 는 소수라는 것을 알 수 있다.</p>
<p>이 정규식은 1998 년 [Abigail](https://github.com/Abigail) 에 의해 발명(?) 되었다고 한다.</p>

